// Copyright {{year}} teamlint.com. All rights reserved.
// Code generated by ardan.

package {{.Setting.Controller}}

import (
	"net/http"
	"time"

	"{{import .Setting.GoMod .Setting.Output .Setting.App .Setting.Model}}"
	"{{import .Setting.GoMod .Setting.Output .Setting.App .Setting.Model .Setting.Query}}"
	"{{import .Setting.GoMod .Setting.Output .Setting.App .Setting.Service}}"

	"github.com/rs/zerolog/log"
	"github.com/gin-gonic/gin"
	api "github.com/teamlint/ardan/pkg/http"
	"github.com/teamlint/ardan/server"
)

type HomeController struct{
	// YourService     service.YourService

}

// func NewHomeController(svc {{.Setting.Service}}.YourService) *HomeController {
func NewHomeController() *HomeController {
	return &HomeController{
		// YourService: svc,
	}
}

// server module register interface
func (c *HomeController) RegisterModule(s *server.Server) {
	s.GET("/", c.Index)
	s.GET("/_health", c.Health)
}

func (c *HomeController) Index(ctx *gin.Context) {
	result := map[string]interface{}{
		"Name":      "ardan",
		"Page":      "Home>Index",
		"Message":   "Welcome to used ardan!",
		"CreatedAt": time.Now(),
	}
	ctx.JSON(http.StatusOK, api.NewResponseOK("ok", result))
}

func (c *HomeController) Health(ctx *gin.Context) {
	ctx.JSON(http.StatusOK, gin.H{"status": "ok"})
}
